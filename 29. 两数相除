#define MAX 0X7FFFFFFF
#define MIN 0X80000000

class Solution {
public:
    int divide(int dividend, int divisor) {
        int flag = -1;
        if(((divisor ^ dividend) & MIN) == 0)
            flag = 1;
        //（1）把dividend与divisor取绝对值后溢出的情况先解决
        bool truncation = 0;
        if(dividend == MIN && divisor == -1)
            return MAX;
        if(dividend == MIN && divisor == 1)
            return MIN;
        if(divisor == MIN && dividend == MIN)
            return 1;
        else if(divisor == MIN && dividend != MIN)
            return 0;
        else
            divisor = abs(divisor);
        if(dividend == MIN)
            dividend = MAX, truncation = 1;
        else
            dividend = abs(dividend);
        
        //（2） 一般情况
        int ans = 0;
        for(int i = 31; i >= 0; i--)
        {
            if((dividend>>i) >= divisor)
                ans += 1<<i, dividend -= (divisor<<i);
        }
        if(truncation && (++dividend) == divisor)
            ans++;
        return flag > 0 ? ans : -ans;
    }
};
